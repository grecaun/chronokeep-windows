CREATE TABLE IF NOT EXISTS
    events (
        event_id INTEGER PRIMARY KEY,
        event_name VARCHAR(100) NOT NULL,
        event_date INTEGER NOT NULL)

CREATE TABLE IF NOT EXISTS
    divisions (
        division_id INTEGER PRIMARY KEY,
        division_name VARCHAR(100) NOT NULL,
        event_id INTEGER NOT NULL REFERENCES events(event_id))

CREATE TABLE IF NOT EXISTS
    timingpoints (
        timingpoint_id INTEGER PRIMARY KEY,
        event_id INTEGER NOT NULL REFERENCES events(event_id),
        division_id INTEGER NOT NULL REFERENCES divisions(division_id)
        timingpoint_name VARCHAR(100) NOT NULL,
        timingpoint_distance VARCHAR(5),
        timingpoint_unit VARCHAR(2))

CREATE TABLE IF NOT EXISTS
    emergencycontacts (
        emergencycontact_id INTEGER PRIMARY KEY,
        emergencycontact_name VARCHAR(150) NOT NULL,
        emergencycontact_phone VARCHAR(20),
        emergencycontact_email VARCHAR(150))

CREATE TABLE IF NOT EXISTS
    participants (
        participant_id INTEGER PRIMARY KEY,
        participant_first VARCHAR(50) NOT NULL,
        participant_last VARCHAR(75) NOT NULL,
        participant_street VARCHAR(150),
        participant_city VARCHAR(75),
        participant_state VARCHAR(25),
        participant_zip VARCHAR(10),
        participant_birthday INTEGER NOT NULL,
        emergencycontact_id INTEGER REFERENCES emergencycontacts(emergencycontact_id),
        participant_phone VARCHAR(20),
        participant_email VARCHAR(150),
        participant_mobile VARCHAR(20),
        participant_parent VARCHAR(150),
        participant_country VARCHAR(50),
        participant_street2 VARCHAR(50),
        participant_gender VARCHAR(10)
        )

CREATE TABLE IF NOT EXISTS
    eventspecific (
        eventspecific_id INTEGER PRIMARY KEY,
        participant_id INTEGER NOT NULL REFERENCES participants(participant_id),
        event_id INTEGER NOT NULL REFERENCES events(event_id),
        division_id INTEGER NOT NULL REFERENCES divisions(division_id),
        eventspecific_bib INTEGER,
        eventspecific_chip INTEGER,
        eventspecific_checkedin INTEGER DEFAULT 0,
        eventspecific_shirtpurchase INTEGER DEFAULT 0,
        eventspecific_shirtsize VARCHAR(5),
        eventspecific_comments VARCHAR,
        eventspecific_secondshirt VARCHAR,
        eventspecific_owes VARCHAR(50),
        eventspecific_hat VARCHAR(20),
        eventspecific_other VARCHAR,
        eventspecific_earlystart INTEGER DEFAULT 0
        )

CREATE TABLE IF NOT EXISTS
    timeresults (
        event_id INTEGER NOT NULL REFERENCES events(event_id),
        eventspecific_id INTEGER NOT NULL REFERENCES eventspecific(eventspecific_id),
        timingpoint_id INTEGER NOT NULL REFERENCES timingpoints(timingpoint_id),
        timeresult_time INTEGER NOT NULL)

CREATE TABLE IF NOT EXISTS
    changes (
        change_id INTEGER PRIMARY KEY,
        old_participant_id INTEGER NOT NULL,
        old_first VARCHAR(50) NOT NULL,1
        old_last VARCHAR(75) NOT NULL,2
        old_street VARCHAR(150),3
        old_city VARCHAR(75),4
        old_state VARCHAR(25),5
        old_zip VARCHAR(10),6
        old_birthday INTEGER NOT NULL,7
        old_phone VARCHAR(20),8
        old_email VARCHAR(150),9
        old_emergency_id INTEGER,
        old_emergency_name VARCHAR(150),10
        old_emergency_phone VARCHAR(20),11
        old_emergency_email VARCHAR(150),12
        old_event_spec_id INTEGER NOT NULL,
        old_event_spec_event_id INTEGER NOT NULL,
        old_event_spec_division_id INTEGER NOT NULL,
        old_event_spec_bib INTEGER,13
        old_event_spec_chip INTEGER,14
        old_event_spec_checkedin INTEGER NOT NULL,
        old_event_spec_shirtpurchase INTEGER NOT NULL,
        old_event_spec_shirtsize VARCHAR(5),15
        old_event_spec_comments VARCHAR,16
        old_mobile VARCHAR(20),17
        old_parent VARCHAR(150),18
        old_country VARCHAR(50),19
        old_street2 VARCHAR(50),20
        old_secondshirt VARCHAR,21
        old_owes VARCHAR(50),22
        old_hat VARCHAR(20),23
        old_other VARCHAR,24
        old_gender VARCHAR(10),
        old_earlystart INTEGER

        new_participant_id INTEGER NOT NULL,
        new_first VARCHAR(50) NOT NULL,
        new_last VARCHAR(75) NOT NULL,
        new_street VARCHAR(150),
        new_city VARCHAR(75),
        new_state VARCHAR(25),
        new_zip VARCHAR(10),
        new_birthday INTEGER NOT NULL,
        new_phone VARCHAR(20),
        new_email VARCHAR(150),
        new_emergency_id INTEGER,
        new_emergency_name VARCHAR(150),
        new_emergency_phone VARCHAR(20),
        new_emergency_email VARCHAR(150),
        new_event_spec_id INTEGER NOT NULL,
        new_event_spec_event_id INTEGER NOT NULL,
        new_event_spec_division_id INTEGER NOT NULL,
        new_event_spec_bib INTEGER,
        new_event_spec_chip INTEGER,
        new_event_spec_checkedin INTEGER NOT NULL,
        new_event_spec_shirtpurchase INTEGER NOT NULL,
        new_event_spec_shirtsize VARCHAR(5),
        new_event_spec_comments VARCHAR)
        new_mobile VARCHAR(20),
        new_parent VARCHAR(150),
        new_country VARCHAR(50),
        new_street2 VARCHAR(50),
        new_secondshirt VARCHAR,
        new_owes VARCHAR(50),
        new_hat VARCHAR(20),
        new_other VARCHAR,
        new_gender VARCHAR(10),
        new_earlystart INTEGER

CREATE TABLE IF NOT EXISTS
    settings (
        version INTEGER NOT NULL
        )