CREATE TABLE IF NOT EXISTS
    events (
        event_id INTEGER PRIMARY KEY,
        name VARCHAR(100) NOT NULL,
        date INTEGER NOT NULL)

CREATE TABLE IF NOT EXISTS
    divisions (
        division_id INTEGER PRIMARY KEY,
        name VARCHAR(100) NOT NULL,
        event_id INTEGER NOT NULL REFERENCES events(event_id))

CREATE TABLE IF NOT EXISTS
    timingpoints (
        timingpoint_id INTEGER PRIMARY KEY,
        event_id INTEGER NOT NULL REFERENCES events(event_id),
        name VARCHAR(100) NOT NULL,
        distance VARCHAR(5),
        unit VARCHAR(2))

CREATE TABLE IF NOT EXISTS
    emergencycontacts (
        emergencycontact_id INTEGER PRIMARY KEY,
        name VARCHAR(150) NOT NULL,
        phone VARCHAR(20),
        email VARCHAR(150))

CREATE TABLE IF NOT EXISTS
    participants (
        participant_id INTEGER PRIMARY KEY,
        first VARCHAR(50) NOT NULL,
        last VARCHAR(75) NOT NULL,
        street VARCHAR(150),
        city VARCHAR(75),
        state VARCHAR(25),
        zip VARCHAR(10),
        birthday INTEGER NOT NULL,
        emergencycontact_id INTEGER REFERENCES emergencycontacts(emergencycontact_id),
        phone VARCHAR(20),
        email VARCHAR(150))

CREATE TABLE IF NOT EXISTS
    eventspecific (
        eventspecific_id INTEGER PRIMARY KEY,
        participant_id INTEGER NOT NULL REFERENCES participants(participant_id),
        event_id INTEGER NOT NULL REFERENCES events(event_id),
        division_id INTEGER NOT NULL REFERENCES divisions(division_id),
        bib INTEGER,
        chip INTEGER,
        checkedin INTEGER DEFAULT 0,
        shirpurchase INTEGER DEFAULT 0,
        shirtsize VARCHAR(5))

CREATE TABLE IF NOT EXISTS
    timeresults (
        event_id INTEGER NOT NULL REFERENCES events(event_id),
        eventspecific_id INTEGER NOT NULL REFERENCES eventspecific(eventspecific_id),
        timingpoint_id INTEGER NOT NULL REFERENCES timingpoints(timingpoint_id),
        time INTEGER NOT NULL)

CREATE TABLE IF NOT EXISTS
    changes (
        change_id INTEGER PRIMARY KEY,
        old_participant_id INTEGER NOT NULL,
        old_first VARCHAR(50) NOT NULL,
        old_last VARCHAR(75) NOT NULL,
        old_street VARCHAR(150),
        old_city VARCHAR(75),
        old_state VARCHAR(25),
        old_zip VARCHAR(10),
        old_birthday INTEGER NOT NULL,
        old_emergency_id INTEGER,
        old_emergency_name VARCHAR(150),
        old_emergency_phone VARCHAR(20),
        old_emergency_email VARCHAR(150),
        old_event_spec_id INTEGER NOT NULL,
        old_event_spec_event_id INTEGER NOT NULL,
        old_event_spec_division_id INTEGER NOT NULL,
        old_event_spec_bib INTEGER,
        old_event_spec_chip INTEGER,
        old_event_spec_checkedin INTEGER NOT NULL,
        old_event_spec_shirtpurchase INTEGER NOT NULL,
        old_event_spec_shirtsize VARCHAR(5),
        new_participant_id INTEGER NOT NULL,
        new_first VARCHAR(50) NOT NULL,
        new_last VARCHAR(75) NOT NULL,
        new_street VARCHAR(150),
        new_city VARCHAR(75),
        new_state VARCHAR(25),
        new_zip VARCHAR(10),
        new_birthday INTEGER NOT NULL,
        new_emergency_id INTEGER,
        new_emergency_name VARCHAR(150),
        new_emergency_phone VARCHAR(20),
        new_emergency_email VARCHAR(150),
        new_event_spec_id INTEGER NOT NULL,
        new_event_spec_event_id INTEGER NOT NULL,
        new_event_spec_division_id INTEGER NOT NULL,
        new_event_spec_bib INTEGER,
        new_event_spec_chip INTEGER,
        new_event_spec_checkedin INTEGER NOT NULL,
        new_event_spec_shirtpurchase INTEGER NOT NULL,
        new_event_spec_shirtsize VARCHAR(5))